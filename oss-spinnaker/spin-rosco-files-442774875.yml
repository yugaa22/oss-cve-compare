apiVersion: v1
data:
  aws-windows-2012-configure-ec2service.ps1: IyBUaGUgRUMyQ29uZmlnIFNlcnZpY2UgY29uZmlndXJlcyB0aGUgRUMyIGluc3RhbmNlIGF0IGJvb3QgdGltZS4gU2VlIHRoZSBmb2xsb3dpbmcgVVJMIGZvciBtb3JlIGRldGFpbHM6CiMgaHR0cDovL2RvY3MuYXdzLmFtYXpvbi5jb20vQVdTRUMyL2xhdGVzdC9XaW5kb3dzR3VpZGUvVXNpbmdDb25maWdfV2luQU1JLmh0bWwjVXNpbmdDb25maWdYTUxfV2luQU1JCgojIE5vdGU6IFRoZSBFQzJDb25maWcgU2VydmljZSBpcyBub3QgaW5jbHVkZWQgaW4gV2luZG93cyBTZXJ2ZXIgMjAxNiBBTUkncy4gU2VlIHRoZSBmb2xsb2luZyBVUkwgZm9yIG1vcmUgZGV0YWlsczoKIyBodHRwOi8vZG9jcy5hd3MuYW1hem9uLmNvbS9BV1NFQzIvbGF0ZXN0L1dpbmRvd3NHdWlkZS93aW5kb3dzLWFtaS12ZXJzaW9uLWhpc3RvcnkuaHRtbCN3aW4yazE2LWFtaXMKCiMgQ29uZmlndXJlIHRoZSBFQzJDb25maWcgc2VydmljZS4KJENvbmZpZ0ZpbGU9IkM6XFxQcm9ncmFtIEZpbGVzXFxBbWF6b25cXEVjMkNvbmZpZ1NlcnZpY2VcXFNldHRpbmdzXFxDb25maWcueG1sIgokeG1sID0gW3htbF0oZ2V0LWNvbnRlbnQgJENvbmZpZ0ZpbGUpCiR4bWxFbGVtZW50ID0gJHhtbC5nZXRfRG9jdW1lbnRFbGVtZW50KCkKJHhtbEVsZW1lbnRUb01vZGlmeSA9ICR4bWxFbGVtZW50LlBsdWdpbnMKCmZvcmVhY2ggKCRlbGVtZW50IGluICR4bWxFbGVtZW50VG9Nb2RpZnkuUGx1Z2luKQp7CiAgICBpZiAoJGVsZW1lbnQubmFtZSAtZXEgIkVjMlNldFBhc3N3b3JkIikKICAgIHsKICAgICAgICAkZWxlbWVudC5TdGF0ZT0iRW5hYmxlZCIKICAgIH0KICAgIGVsc2VpZiAoJGVsZW1lbnQubmFtZSAtZXEgIkVjMlNldENvbXB1dGVyTmFtZSIpCiAgICB7CiAgICAgICAgJGVsZW1lbnQuU3RhdGU9IkVuYWJsZWQiCiAgICB9CiAgICBlbHNlaWYgKCRlbGVtZW50Lm5hbWUgLWVxICJFYzJIYW5kbGVVc2VyRGF0YSIpCiAgICB7CiAgICAgICAgJGVsZW1lbnQuU3RhdGU9IkVuYWJsZWQiCiAgICB9Cn0KJHhtbC5TYXZlKCRDb25maWdGaWxlKQoKIyBDb25maWd1cmUgaG93IEVDMkNvbmZpZyBwcmVwYXJlcyB0aGUgaW5zdGFuY2UgZm9yIEFNSSBjcmVhdGlvbi4KJEJ1bmRsZUNvbmZpZ0ZpbGU9IkM6XFxQcm9ncmFtIEZpbGVzXFxBbWF6b25cXEVjMkNvbmZpZ1NlcnZpY2VcXFNldHRpbmdzXFxCdW5kbGVDb25maWcueG1sIgokeG1sID0gW3htbF0oZ2V0LWNvbnRlbnQgJEJ1bmRsZUNvbmZpZ0ZpbGUpCiR4bWxFbGVtZW50ID0gJHhtbC5nZXRfRG9jdW1lbnRFbGVtZW50KCkKCmZvcmVhY2ggKCRlbGVtZW50IGluICR4bWxFbGVtZW50LlByb3BlcnR5KQp7CiAgICBpZiAoJGVsZW1lbnQuTmFtZSAtZXEgIkF1dG9TeXNwcmVwIikKICAgIHsKICAgICAgICAkZWxlbWVudC5WYWx1ZT0iWWVzIgogICAgfQp9CiR4bWwuU2F2ZSgkQnVuZGxlQ29uZmlnRmlsZSkK
  aws-windows.userdata: PHBvd2Vyc2hlbGw+CgojIFR1cm4gb2ZmIFBvd2VyU2hlbGwgZXhlY3V0aW9uIHBvbGljeSByZXN0cmljdGlvbnMuCiRQb2xpY3kgPSAiQnlwYXNzIgokQ3VycmVudEV4ZWN1dGlvblBvbGljeSA9IChHZXQtRXhlY3V0aW9uUG9saWN5KQpJZiAoJEN1cnJlbnRFeGVjdXRpb25Qb2xpY3kgLW5lICRQb2xpY3kgLU9SICRDdXJyZW50RXhlY3V0aW9uUG9saWN5IC1uZSAiVW5yZXN0cmljdGVkIikgewogICBTZXQtRXhlY3V0aW9uUG9saWN5ICRQb2xpY3kgLVNjb3BlIFByb2Nlc3MgLUZvcmNlCn0KCiMgQ29uZmlndXJlIFdpblJNLgp3aW5ybSBxdWlja2NvbmZpZyAtcQp3aW5ybSBzZXQgd2lucm0vY29uZmlnL3dpbnJzICdAe01heE1lbW9yeVBlclNoZWxsTUI9IjIwNDgifScKd2lucm0gc2V0IHdpbnJtL2NvbmZpZy93aW5ycyAnQHtNYXhDb25jdXJyZW50VXNlcnM9IjEwMCJ9Jwp3aW5ybSBzZXQgd2lucm0vY29uZmlnL3dpbnJzICdAe01heFByb2Nlc3Nlc1BlclNoZWxsPSIwIn0nCndpbnJtIHNldCB3aW5ybS9jb25maWcvd2lucnMgJ0B7TWF4U2hlbGxzUGVyVXNlcj0iMCJ9Jwp3aW5ybSBzZXQgd2lucm0vY29uZmlnICdAe01heFRpbWVvdXRtcz0iNzIwMDAwMCJ9Jwp3aW5ybSBzZXQgd2lucm0vY29uZmlnL3NlcnZpY2UgJ0B7QWxsb3dVbmVuY3J5cHRlZD0idHJ1ZSJ9Jwp3aW5ybSBzZXQgd2lucm0vY29uZmlnL3NlcnZpY2UvYXV0aCAnQHtCYXNpYz0idHJ1ZSJ9Jwp3aW5ybSBzZXQgd2lucm0vY29uZmlnL3NlcnZpY2UvYXV0aCAnQHtDcmVkU1NQPSJ0cnVlIn0nCndpbnJtIHNldCB3aW5ybS9jb25maWcvY2xpZW50ICdAe1RydXN0ZWRIb3N0cz0iKiJ9JwoKCiMgT3BlbiBwb3J0IDU5ODUgaW4gdGhlIGludGVybmFsIFdpbmRvd3MgZmlyZXdhbGwgdG8gYWxsb3cgV2luUk0gY29tbXVuaWNhdGlvbi4KbmV0c2ggYWR2ZmlyZXdhbGwgZmlyZXdhbGwgYWRkIHJ1bGUgbmFtZT0iV2luUk0gNTk4NSIgcHJvdG9jb2w9VENQIGRpcj1pbiBsb2NhbHBvcnQ9NTk4NSBhY3Rpb249YWxsb3cKClN0b3AtU2VydmljZSB3aW5ybQpTZXQtU2VydmljZSB3aW5ybSAtc3RhcnR1cHR5cGUgImF1dG9tYXRpYyIKU3RhcnQtU2VydmljZSB3aW5ybQoKPC9wb3dlcnNoZWxsPgo=
  windows-configure-chocolatey.ps1: IyBVcGRhdGUgUFMgdG8gYWxsb3cgVExTMS4yCltOZXQuU2VydmljZVBvaW50TWFuYWdlcl06OlNlY3VyaXR5UHJvdG9jb2wgPSBbTmV0LlNlcnZpY2VQb2ludE1hbmFnZXJdOjpTZWN1cml0eVByb3RvY29sIC1ib3IgW05ldC5TZWN1cml0eVByb3RvY29sVHlwZV06OlRsczEyCgojIEluc3RhbGwgQ2hvY29sYXRleS4KSW52b2tlLVdlYlJlcXVlc3QgaHR0cHM6Ly9jaG9jb2xhdGV5Lm9yZy9pbnN0YWxsLnBzMSAtVXNlQmFzaWNQYXJzaW5nIHwgSW52b2tlLUV4cHJlc3Npb24KCiMgVGhlc2UgYXJlIHRoZSByZXNlcnZlZCBzb3VyY2VzIHRoYXQgYXJlIGhhbmRsZWQgZGlyZWN0bHkgYnkgQ2hvY29sYXRleS4KJGFsdGVybmF0ZVNvdXJjZXMgPSBAKCJydWJ5IiwgIndlYnBpIiwgImN5Z3dpbiIsICJ3aW5kb3dzZmVhdHVyZXMiLCAicHl0aG9uIikKCiMgU3BpbHQgc3VwcGxpZWQgcmVwb3NpdG9yaWVzIGludG8gaW5kaXZpZHVhbCBlbnRyaWVzLgpbc3RyaW5nXSRjaG9jb2xhdGV5UmVwb3NpdG9yeSA9ICRlbnY6cmVwb3NpdG9yeQpbc3RyaW5nW11dJHJlcG9zaXRvcmllcyA9IEAoKQppZiAoIVtzdHJpbmddOjpJc051bGxPcldoaXRlU3BhY2UoJGNob2NvbGF0ZXlSZXBvc2l0b3J5KSAtQU5EICRjaG9jb2xhdGV5UmVwb3NpdG9yeSAtY29udGFpbnMgJzsnKSB7CiAgICBbc3RyaW5nW11dJHJlcG9zaXRvcmllcyA9ICRjaG9jb2xhdGV5UmVwb3NpdG9yeS5TcGxpdCgnOycsIFtTeXN0ZW0uU3RyaW5nU3BsaXRPcHRpb25zXTo6UmVtb3ZlRW1wdHlFbnRyaWVzKQp9IGVsc2UgewogICAgJHJlcG9zaXRvcmllcyA9IEAoJGNob2NvbGF0ZXlSZXBvc2l0b3J5KQp9CgojIFByb2Nlc3MgZWFjaCByZXBvc2l0b3J5LCBhZGRpbmcgZWFjaCBvbmUgYXMgYSBwYWNrYWdlIHJlcG9zaXRvcnkuCiRyZXBvc2l0b3J5UHJpb3JpdHkgPSAwCmZvciAoJGk9MDsgJGkgLWx0ICRyZXBvc2l0b3JpZXMuTGVuZ3RoOyAkaSsrKSB7CgogICAgaWYgKCFbc3RyaW5nXTo6SXNOdWxsT3JXaGl0ZVNwYWNlKCRyZXBvc2l0b3JpZXNbJGldKSkgewoKICAgICAgICAjIFJlbW92ZSBsZWFkaW5nIGFuZCB0cmFpbGluZyB3aGl0ZXNwYWNlcyBmcm9tIHRoZSByZXBvc2l0b3J5IFVSTC4KICAgICAgICAkcmVwb3NpdG9yeSA9ICRyZXBvc2l0b3JpZXNbJGldLlRyaW0oKQoKICAgICAgICBpZiAoIVtzdHJpbmddOjpJc051bGxPcldoaXRlU3BhY2UoJHJlcG9zaXRvcnkpKSB7CgogICAgICAgICAgICAkdXNlciA9ICRudWxsCiAgICAgICAgICAgICRwYXNzID0gJG51bGwKCiAgICAgICAgICAgICMgSWdub3JlIHJlcG9zaXRvcnkgaWYgaXQncyBvbmUgb2YgdGhlIGFsdGVybmF0ZSBzb3VyY2VzLgogICAgICAgICAgICBpZiAoJGFsdGVybmF0ZVNvdXJjZXMgLWNvbnRhaW5zICRyZXBvc2l0b3J5KSB7IGNvbnRpbnVlIH0KCiAgICAgICAgICAgICMgVmFsaWRhdGUgdGhlIHJlcG9zaXRvcnkgVVJMIGV4aXN0cy4gSWYgc3RhdHVzIGNvZGUgaXMgbm90IDIwMCBvciBhbiBleGNlcHRpb24gaXMKICAgICAgICAgICAgIyB0aHJvd24sIGlnbm9yZSB0aGUgcmVwb3NpdG9yeS4KICAgICAgICAgICAgJGlzVmFsaWQgPSAkZmFsc2UKICAgICAgICAgICAgdHJ5IHsKCiAgICAgICAgICAgICAgICAkcmVwb1VyaSA9IFtTeXN0ZW0uVXJpXSRyZXBvc2l0b3J5CiAgICAgICAgICAgICAgICAkaGVhZGVycyA9IEB7fQogICAgICAgICAgICAgICAgaWYoIVtzdHJpbmddOjpJc051bGxPcldoaXRlU3BhY2UoJHJlcG9VcmkuVXNlckluZm8pKQogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICR1c2VycGFzcyA9ICRyZXBvVXJpLlVzZXJJbmZvLlNwbGl0KCI6IikKICAgICAgICAgICAgICAgICAgICAkdXNlciA9ICR1c2VycGFzc1swXQogICAgICAgICAgICAgICAgICAgICRwYXNzID0gJHVzZXJwYXNzWzFdCiAgICAgICAgICAgICAgICAgICAgJHJlcG9zaXRvcnkgPSAkcmVwb1VyaS5BYnNvbHV0ZVVyaS5SZXBsYWNlKCRyZXBvVXJpLlVzZXJJbmZvICsgIkAiLCAiIikKICAgICAgICAgICAgICAgICAgICAkYmFzZTY0ID0gW1N5c3RlbS5Db252ZXJ0XTo6VG9CYXNlNjRTdHJpbmcoW1N5c3RlbS5UZXh0LkVuY29kaW5nXTo6QVNDSUkuR2V0Qnl0ZXMoIiR7dXNlcn06JHtwYXNzfSIpKQogICAgICAgICAgICAgICAgICAgICRoZWFkZXJzID0gQHsgQXV0aG9yaXphdGlvbiA9ICJCYXNpYyAkYmFzZTY0IiB9CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgJHN0YXR1c0NvZGUgPSAoSW52b2tlLVdlYlJlcXVlc3QgLVVyaSAiJHJlcG9zaXRvcnkiIGAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC1Vc2VCYXNpY1BhcnNpbmcgYAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLU1ldGhvZCBHRVQgYAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLU1heGltdW1SZWRpcmVjdGlvbiAwIGAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC1UaW1lb3V0U2VjIDYwIGAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC1IZWFkZXJzICRoZWFkZXJzKS5TdGF0dXNDb2RlCiAgICAgICAgICAgICAgICAkaXNWYWxpZCA9ICgkc3RhdHVzQ29kZSAtZ2UgMjAwIC1hbmQgJHN0YXR1c0NvZGUgLWx0IDMwMCkKCiAgICAgICAgICAgIH0gY2F0Y2ggewogICAgICAgICAgICAgICAgJEVycm9yTWVzc2FnZSA9ICRfLkV4Y2VwdGlvbi5NZXNzYWdlCiAgICAgICAgICAgICAgICAkRmFpbGVkSXRlbSA9ICRfLkV4Y2VwdGlvbi5JdGVtTmFtZQogICAgICAgICAgICAgICAgV3JpdGUtSG9zdCAiQ2F1Z2h0IGV4Y2VwdGlvbiB2YWxpZGF0aW5nIHJlcG9zaXRvcnkgKCQkcmVwb3NpdG9yeXt9KS4gRmFpbGVkSXRlbTogJEZhaWxlZEl0ZW07IEVycm9yTWVzc2FnZTogJEVycm9yTWVzc2FnZSIKICAgICAgICAgICAgICAgIGNvbnRpbnVlCiAgICAgICAgICAgIH0KCiAgICAgICAgICAgICMgSWdub3JlIHJlcG9zaXRvcnkgaWYgVVJMIGlzIGludmFsaWQuCiAgICAgICAgICAgIGlmICghJGlzVmFsaWQpIHsgY29udGludWUgfQoKICAgICAgICAgICAgIyBJbmNyZW1lbnQgcmVwb3NpdG9yeSBwcmlvcml0eS4KICAgICAgICAgICAgJHJlcG9zaXRvcnlQcmlvcml0eSsrCgogICAgICAgICAgICAjIEV4dHJhY3QgdGhlIHJlcG9zaXRvcnkgbmFtZS4gVXNlIHRoZSBob3N0bmFtZSBhbmQgZG9tYWluLCBjb3ZlcnRpbmcgdGhlIHBlcmlvZHMgdG8gZGFzaGVzLgogICAgICAgICAgICAkcmVwb3NpdG9yeU5hbWUgPSAoTmV3LU9iamVjdCBTeXN0ZW0uVXJpICRyZXBvc2l0b3J5KS5Ib3N0LlJlcGxhY2UoIi4iLCAiLSIpCgogICAgICAgICAgICAjIEFkZCByZXBvc2l0b3J5IHRvIENob2NvbGF0ZXkuCiAgICAgICAgICAgIGlmKCFbc3RyaW5nXTo6SXNOdWxsT3JXaGl0ZVNwYWNlKCR1c2VyKSl7CiAgICAgICAgICAgICAgICAmImNob2NvIiBzb3VyY2UgYWRkIC0teWVzIC0tbmFtZT0kcmVwb3NpdG9yeU5hbWUgLS1zb3VyY2U9YCIkcmVwb3NpdG9yeWAiIC0tcHJpb3JpdHk9JHJlcG9zaXRvcnlQcmlvcml0eSAtLXVzZXI9JHVzZXIgLS1wYXNzd29yZD0kcGFzcwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgJiJjaG9jbyIgc291cmNlIGFkZCAtLXllcyAtLW5hbWU9JHJlcG9zaXRvcnlOYW1lIC0tc291cmNlPWAiJHJlcG9zaXRvcnlgIiAtLXByaW9yaXR5PSRyZXBvc2l0b3J5UHJpb3JpdHkKICAgICAgICAgICAgfQoKICAgICAgICB9CiAgICB9Cn0K
  windows-install-packages.ps1: JHBhY2thZ2VzID0gQCgpCgpmdW5jdGlvbiBDb252ZXJ0LVBhY2thZ2VOYW1lVG9JbnN0YWxsYWJsZVBhY2thZ2UoW3N0cmluZ10kcGFja2FnZU5hbWUpIHsKICAgICMgUGFyc2UgcGFja2FnZSBuYW1lIGludG8gaXQncyBjb25zdGl0dWVudCBwYXJ0cwogICAgW3N0cmluZ10kcGFja2FnZVZlcnNpb24gPSAiIgogICAgW3N0cmluZ10kcGFja2FnZVJlbGVhc2UgPSAiIgoKICAgICMgS2VlcCB0aGlzIHZlcmJhdGltIG1pbnVzIGxlYWRpbmcgYmFuZwogICAgaWYgKCRwYWNrYWdlTmFtZS5TdGFydHNXaXRoKCIhIikpIHsKICAgICAgcmV0dXJuICRwYWNrYWdlTmFtZS5UcmltU3RhcnQoIiEiKSwgIiIKICAgIH0KCiAgICAjIFNwbGl0IHBhY2thZ2VOYW1lIGludG8gYW4gYXJyYXkuCiAgICBbQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0W1N0cmluZ11dJHBhcnRzID0gJHBhY2thZ2VOYW1lLnNwbGl0KCcuJykKCiAgICBpZiAoJHBhcnRzLkNvdW50IC1ndCAyKSB7CiAgICAgICAgW2ludF0kdmVyc2lvblN0YXJ0ID0gMAoKICAgICAgICBmb3IgKFtpbnRdJGkgPSAwOyAkaSAtbHQgJHBhcnRzLkNvdW50OyAkaSsrKSB7CiAgICAgICAgICAgIGlmICgkaSAtZ3QgMCAtYW5kICRwYXJ0c1skaV0gLW1hdGNoICdeXGQrJCcpIHsKICAgICAgICAgICAgICAgICR2ZXJzaW9uU3RhcnQgPSAkaQogICAgICAgICAgICAgICAgYnJlYWsKICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgaWYgKCR2ZXJzaW9uU3RhcnQgLWx0IDEpIHsKICAgICAgICAgICAgZm9yIChbaW50XSRpID0gMDsgJGkgLWx0ICRwYXJ0c0NvdW50OyAkaSsrKSB7CiAgICAgICAgICAgICAgICBpZiAoJGkgLWd0IDAgLWFuZCAkcGFydHNbJGldLkNvbnRhaW5zKCctJykgLWFuZCAkcGFydHNbJGldWzBdIC1tYXRjaCAnXlxkKyQnKSB7CiAgICAgICAgICAgICAgICAgICAgJHZlcnNpb25TdGFydCA9ICRpCiAgICAgICAgICAgICAgICAgICAgYnJlYWsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgaWYgKCR2ZXJzaW9uU3RhcnQgLWd0IDApIHsKICAgICAgICAgICAgJHBhY2thZ2VOYW1lID0gW1N0cmluZ106OkpvaW4oJy4nLCAkcGFydHMuR2V0UmFuZ2UoMCwgJHZlcnNpb25TdGFydCkuVG9BcnJheSgpKQogICAgICAgICAgICAkcGFja2FnZVZlcnNpb24gPSBbU3RyaW5nXTo6Sm9pbignLicsICRwYXJ0cy5HZXRSYW5nZSgkdmVyc2lvblN0YXJ0LCAkcGFydHMuQ291bnQgLSAkdmVyc2lvblN0YXJ0KS5Ub0FycmF5KCkpCgogICAgICAgICAgICBpZiAoJHBhY2thZ2VWZXJzaW9uLkNvbnRhaW5zKCctJykpIHsKICAgICAgICAgICAgICAgICgkcGFja2FnZVZlcnNpb24sICRwYWNrYWdlUmVsZWFzZSkgPSAkcGFja2FnZVZlcnNpb24uU3BsaXQoJy0nLCAyKQogICAgICAgICAgICB9CiAgICAgICAgICAgIGVsc2VpZiAoJHBhY2thZ2VWZXJzaW9uLkNvbnRhaW5zKCcrJykpIHsKICAgICAgICAgICAgICAgICgkcGFja2FnZVZlcnNpb24sICRwYWNrYWdlUmVsZWFzZSkgPSAkcGFja2FnZVZlcnNpb24uU3BsaXQoJysnLCAyKQogICAgICAgICAgICAgICAgJHBhY2thZ2VSZWxlYXNlID0gJysnICsgJHBhY2thZ2VSZWxlYXNlCiAgICAgICAgICAgIH0KCiAgICAgICAgfQogICAgICAgIGVsc2UgewoKICAgICAgICAgICAgW2ludF0kbWV0YURhdGFJbmRleCA9ICRwYXJ0cy5GaW5kSW5kZXgoIHskYXJnc1swXSAtbWF0Y2ggJ1wrJ30gKQoKICAgICAgICAgICAgaWYgKCRtZXRhRGF0YUluZGV4IC1ndCAtMSkgewogICAgICAgICAgICAgICAgKCRwYWNrYWdlTmFtZSwgJHBhY2thZ2VSZWxlYXNlKSA9ICRwYXJ0c1skbWV0YURhdGFJbmRleF0uc3BsaXQoJysnKQogICAgICAgICAgICAgICAgJHBhY2thZ2VSZWxlYXNlID0gIisiICsgJHBhY2thZ2VSZWxlYXNlCiAgICAgICAgICAgICAgICAkcGFja2FnZU5hbWUgPSAiJHtwYXJ0cy5zdWJMaXN0KDAsIG1ldGFEYXRhSW5kZXgpLmpvaW4oJy4nKX0uJG5hbWUiCiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICAkcGFja2FnZU5hbWUgPSBbU3RyaW5nXTo6Sm9pbignLicsICRwYXJ0cykKICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH0KICAgIGVsc2VpZiAoJHBhcnRzLkNvdW50IC1lcSAyKSB7CiAgICAgICAgaWYgKCRwYXJ0c1sxXSAtbWF0Y2ggJ15cZCskJykgewogICAgICAgICAgICAkcGFja2FnZU5hbWUgPSAkcGFydHNbMF0KICAgICAgICAgICAgJHBhY2thZ2VWZXJzaW9uID0gJHBhcnRzWzFdCiAgICAgICAgfQogICAgICAgIGVsc2VpZiAoJHBhcnRzWzFdWzBdIC1tYXRjaCAnXlxkKyQnIC1hbmQgJHBhcnRzWzFdLkNvbnRhaW5zKCctJykpIHsKCiAgICAgICAgICAgICRwYWNrYWdlTmFtZSA9ICRwYXJ0c1swXQoKICAgICAgICAgICAgJHZlcnNpb25QYXJ0cyA9ICRwYXJ0c1sxXS5TcGxpdCgnLScsIDIpCiAgICAgICAgICAgICRwYWNrYWdlVmVyc2lvbiA9ICR2ZXJzaW9uUGFydHNbMF0KICAgICAgICAgICAgJHBhY2thZ2VSZWxlYXNlID0gJHZlcnNpb25QYXJ0c1sxXQoKICAgICAgICB9CiAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICRwYWNrYWdlTmFtZSA9IFtTdHJpbmddOjpKb2luKCcuJywgJHBhcnRzKQogICAgICAgIH0KICAgIH0KCiAgICByZXR1cm4gJHBhY2thZ2VOYW1lLCAkcGFja2FnZVZlcnNpb24KfQoKZnVuY3Rpb24gSW5zdGFsbC1BbGxQYWNrYWdlcygkcGFja2FnZU5hbWVzKXsKICAjIFNwbGl0IHN1cHBsaWVkIHBhY2thZ2VzIGludG8gYW4gYXJyYXkuCiAgJHBhY2thZ2VzID0gJHBhY2thZ2VOYW1lcy5yZXBsYWNlKCcsJywgJyAnKS5zcGxpdCgnICcpCiAgCiAgICAjIEluc3RhbGwgcGFja2FnZXMgYW5kIGVuZm9yY2UgaW5zdGFsbGF0aW9uIG9yZGVyLgogICAgZm9yZWFjaCAoJHBhY2thZ2VOYW1lIGluICRwYWNrYWdlcyB8IFdoZXJlLU9iamVjdCB7LW5vdCBbc3RyaW5nXTo6SXNOdWxsT3JXaGl0ZVNwYWNlKCRfKX0pIHsKICAgICAgJHBhY2thZ2VOYW1lLCAkcGFja2FnZVZlcnNpb24gPSBDb252ZXJ0LVBhY2thZ2VOYW1lVG9JbnN0YWxsYWJsZVBhY2thZ2UgJHBhY2thZ2VOYW1lCgogICAgICBpZiAoIVtzdHJpbmddOjpJc051bGxPcldoaXRlU3BhY2UoJHBhY2thZ2VWZXJzaW9uKSkgewogICAgICAgICYiY2hvY28iIGluc3RhbGwgJHBhY2thZ2VOYW1lIC0teWVzIC0tdmVyc2lvbiAkcGFja2FnZVZlcnNpb24KICAgICAgfQogICAgICBlbHNlIHsKICAgICAgICAmImNob2NvIiBpbnN0YWxsICRwYWNrYWdlTmFtZSAtLXllcwogICAgICB9CiAgICAgIAogICAgICBpZiAoJExhc3RFeGl0Q29kZSAtbmUgMCkgewogICAgICAgIGV4aXQgJExhc3RFeGl0Q29kZQogICAgICB9CiAgICB9Cn0KCldyaXRlLUhvc3QgJGVudjpwYWNrYWdlcwoKaWYgKCFbc3RyaW5nXTo6SXNOdWxsT3JXaGl0ZVNwYWNlKCRlbnY6cGFja2FnZXMpKSB7CiAgSW5zdGFsbC1BbGxQYWNrYWdlcyAkZW52OnBhY2thZ2VzCn0K
kind: Secret
metadata:
  labels:
    app: spin
    cluster: spin-rosco
  name: spin-rosco-files-442774875
type: Opaque
